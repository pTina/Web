{"version":3,"sources":["app.js"],"names":["container","document","getElementById","content","createElement","NEWS_URL","CONTENT_URL","store","currentPage","feeds","getData","url","ajax","XMLHttpRequest","open","send","JSON","parse","response","makeFeed","i","length","read","newsFeed","lastPage","Math","round","newsList","console","log","template","push","id","title","user","points","comments_count","replace","join","innerHTML","newsDetail","location","hash","substr","newsContent","Number","router","routePath","indexOf","window","addEventListener"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["\n// 해커뉴스 api 명세 https://github.com/tastejs/hacker-news-pwas/blob/master/docs/api.md\n//2022-02-13-페이징\n\nconst container = document.getElementById('root');\nconst content = document.createElement('div');\n\nconst NEWS_URL = 'https://api.hnpwa.com/v0/news/1.json';\nconst CONTENT_URL = 'https://api.hnpwa.com/v0/item/@id.json';\n\n// 공유되는 자원\nconst store ={\n    currentPage: 1,\n    feeds: [],\n}\n\nfunction getData(url) {\n    const ajax = new XMLHttpRequest();\n    ajax.open('GET', url, false);\n    ajax.send();\n\n    return JSON.parse(ajax.response);\n}\n\nfunction makeFeed(feeds){\n    for(let i =0; i<feeds.length; i++){\n        // read 속성을 추가\n        feeds[i].read = false;\n    }\n\n    return feeds;\n}\n\nfunction newsFeed() {\n    let newsFeed = store.feeds;\n    let lastPage = Math.round(newsFeed.length/10);\n    const newsList = [];\n\n    if(newsFeed.length === 0 ){\n        newsFeed = store.feeds = makeFeed(getData(NEWS_URL));\n    }\n\n    console.log(newsFeed);\n\n    let template = \n    `\n        <div class=\"continer m-auto p-10\">\n            <h1 class=\"mb-10\">Hacker News</h1>\n            <ul>\n                {{__news_feed__}}\n            </ul>\n\n            <div class=\"absolute top-[35px] right-[90px]\">\n                <a href=\"#/page/{{__prev__page__}}\" class=\"mr-10\"><i class=\"fa-solid fa-angle-left text-[50px]\"></i></a>\n                <a href=\"#/page/{{__next__page__}}\"><i class=\"fa-solid fa-angle-right text-[50px]\"></i></a>\n            </div>\n        </div>\n    `\n\n    // ${newsFeed[i].title} (${newsFeed[i].comments_count})\n    for (let i = (store.currentPage-1)*10; i < (store.currentPage*10); i++) {\n        newsList.push(`\n            <li class = \"${newsFeed[i].read ? 'text-pink-700' : 'text-black'} bg-[#533CA6] p-10 mb-10 rounded-xl text-white flex justify-between\">\n                <p>\n                    <a href=\"#/show/${newsFeed[i].id}\" class=\"block\">\n                        ${newsFeed[i].title}\n                    </a>\n                    <span class=\"mr-5\"><i class=\"fa-solid fa-user mr-2\"></i>${newsFeed[i].user}</span>\n                    <span><i class=\"fa-solid fa-heart mr-2\"></i>${newsFeed[i].points}</span>\n                </p>\n                <p class=\"flex items-center\">\n                    <i class=\"fa-solid fa-comments mr-2\"></i>\n                    <a href=\"#/show/${newsFeed[i].id}\">\n                        ${newsFeed[i].comments_count}\n                    </a>\n                </p>\n            </li>\n        `);\n    }\n\n    template = template.replace('{{__news_feed__}}', newsList.join(''));\n    template = template.replace('{{__prev__page__}}', store.currentPage >1 ? store.currentPage-1 : 1);\n    template = template.replace('{{__next__page__}}', store.currentPage < lastPage ? store.currentPage+1 : lastPage );\n\n    container.innerHTML = template;\n}\n\nfunction newsDetail(){\n    const id = location.hash.substr(7);\n    const newsContent = getData(CONTENT_URL.replace('@id', id));\n\n    container.innerHTML = `\n    <h1>${newsContent.title}</h1>\n    \n    <div>\n        <a href=\"#/page/${store.currentPage}\">목록으로</a>\n    </div>`;\n\n    for(let i =0; i<store.feeds.length; i++){\n        if(store.feeds[i].id === Number(id)){\n            store.feeds[i].read = true;\n            break;\n        }\n    }\n\n}\n\nfunction router(){\n    const routePath = location.hash;\n\n    if(routePath === ''){\n        newsFeed();\n\n    }else if(routePath.indexOf('#/page/') >= 0){\n        store.currentPage = Number(routePath.substr(7));\n        newsFeed();\n\n    }else{\n        newsDetail();\n    }\n}\n\nwindow.addEventListener('hashchange', router);\n\n// newsFeed();\nrouter();\n\n\n\n\n\n\n"]}